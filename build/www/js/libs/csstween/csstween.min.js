/*!
 * VERSION: 0.6.0
 * DATE: 2015-12-31
 * GIT: https://github.com/shrekshrek/csstween
 * @author: Shrek.wang
 **/

!function(t){"function"==typeof define&&define.amd?define(["exports"],function(e){window.CT=t(e)}):"undefined"!=typeof exports?t(exports):window.CT=t({})}(function(t){function e(t,e){for(var n in e)t[n]=e[n]}function n(t,e){if("function"==typeof t)e.call(t,0,t);else if(void 0===t.length)e.call(t,0,t);else for(var n=0;n<t.length;n++)e.call(t[n],n,t[n])}function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function a(t){return t?w+r(t):w}function o(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function s(t,e){return void 0!==t.style[e]?e:(e=a(e),void 0!==t.style[e]?e:void 0)}function u(t,e){if("string"==typeof e){var n=e.substr(0,2),i=parseFloat(e.substr(2));switch(n){case"+=":e=parseFloat(t)+i;break;case"-=":e=parseFloat(t)-i}}return e}function l(t,e){switch(t){case"opacity":case"fontWeight":case"lineHeight":case"zoom":return e;default:return"number"==typeof e?Math.round(e)+"px":e}}function d(t,e){if(document.defaultView&&document.defaultView.getComputedStyle){var n=i(e),r=document.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(n)}return t.currentStyle?t.currentStyle[e]:null}function f(t,e){for(var n in e)void 0!=t.style[n]&&(t.style[n]=l(n,e[n]))}function h(){return++F}function c(t){for(var e in A){var n=A[e];if(n.type===M&&n.name===t||n.type===T&&n.selectorText===t)return{rule:n,index:e}}return null}function m(t,e){var n=A.length;L.insertRule?L.insertRule(t+"{"+e+"}",n):L.addRule&&L.addRule(t,e,n)}function v(t){var e=c(t);null!==e&&(L.deleteRule?L.deleteRule(e.index):L.removeRule&&L.removeRule(e.index))}function y(t,e,n){var r="ct_kfs_"+t,o="0%{",s="100%{";for(var u in e)o+=i(u)+":"+l(u,e[u])+";",s+=i(u)+":"+l(u,n[u])+";";return o+="}",s+="}",m("@"+i(a("Keyframes"))+" "+r,o+s),r}function p(){return++b}function g(){this.initialize.apply(this,arguments)}var w="",E="animationstart",R="animationiteration",S="animationend",_="transitionend";!function(){var t=document.createElement("div"),e=["Webkit","Moz","Ms","O"];for(var n in e)if(e[n]+"Transition"in t.style){w=e[n],"Moz"!==w&&(E=w.toLowerCase()+"AnimationStart",R=w.toLowerCase()+"AnimationIteration",S=w.toLowerCase()+"AnimationEnd",_=w.toLowerCase()+"TransitionEnd");break}}();var L,A,C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,M=window.CSSRule.KEYFRAMES_RULE||window.CSSRule.WEBKIT_KEYFRAMES_RULE||window.CSSRule.MOZ_KEYFRAMES_RULE,T=window.CSSRule.STYLE_RULE||window.CSSRule.WEBKIT_STYLE_RULE||window.CSSRule.MOZ_STYLE_RULE,F=0;!function(){var t=document.createElement("style");t.rel="stylesheet",t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t),L=t.sheet,A=L.cssRules||L.rules||[]}();var H={},b=0;return e(g.prototype,{initialize:function(e,n,i,r){var o=this;this.fromVars=i,this.toVars=r,this.target=e,this.duration=Math.max(n,0),this.ease="cubic-bezier"+(r.ease||t.Linear.None),this.delay=Math.max(r.delay||0,0),this.yoyo=r.yoyo||!1,this.repeat=Math.floor(r.repeat||1),this.onStart=r.onStart||null,this.onStartParams=r.onStartParams||[],this.onRepeat=r.onRepeat||null,this.onRepeatParams=r.onRepeatParams||[],this.onEnd=r.onEnd||null,this.onEndParams=r.onEndParams||[],this.type=r.type||"";var s=p();if(this.target._ct_id&&H[this.target._ct_id].destroy(),this.target._ct_id=s,"a"==this.type){this.startHandler=function(){o.onStart&&o.onStart.apply(this,o.onStartParams)},this.target.addEventListener(E,this.startHandler,!1),this.repeatHandler=function(){o.onRepeat&&o.onRepeat.apply(this,o.onRepeatParams)},this.target.addEventListener(R,this.repeatHandler,!1),this.endHandler=function(){o.destroy(!0)},this.target.addEventListener(S,this.endHandler,!1);var u=h();this.kfsName=y(u,this.fromVars,this.toVars),this.target.style[a("Animation")]=this.kfsName+" "+this.duration+"s "+this.ease+" "+this.delay+"s "+(this.repeat<0?"infinite":this.repeat)+" "+(this.yoyo?"alternate":"normal"),this.target.style[a("AnimationFillMode")]="both",f(this.target,this.toVars)}else this.endHandler=function(){o.destroy(!0)},this.target.addEventListener(_,this.endHandler,!1),C(function(){C(function(){o.target.style[a("Transition")]="all "+o.duration+"s "+o.ease+" "+o.delay+"s",f(o.target,o.toVars),console.log(o.target,o.toVars)})});H[s]=this},destroy:function(t){if(0==t)for(var e in this.toVars)void 0!=this.target.style[e]&&(this.target.style[e]=d(this.target,e));"a"==this.type?(this.target.removeEventListener(E,this.startHandler,!1),this.target.removeEventListener(R,this.repeatHandler,!1),this.target.removeEventListener(S,this.endHandler,!1),this.target.style[a("Animation")]="",this.target.style[a("AnimationFillMode")]="",v(this.kfsName)):(this.target.removeEventListener(_,this.endHandler,!1),this.target.style[a("Transition")]=""),delete H[this.target._ct_id],delete this.target._ct_id,1==t&&this.onEnd&&this.onEnd.apply(this,this.onEndParams)}}),e(t,{get:function(t,e){var n=o(t);void 0!==n.length&&(n=n[0]);var i=s(n,e);return i?d(n,i):null},set:function(t,e){var i=o(t);n(i,function(t,n){var i={};for(var r in e){var a=s(n,r);a&&(i[a]=l(a,u(d(n,a),e[r])))}f(n,i)})},fromTo:function(t,e,i,r){var a=o(t),l=[];return n(a,function(t,n){var a={},o={};for(var h in r){var c=s(n,h);if(c){var m=d(n,c);a[c]=u(m,i[h]),o[c]=u(m,r[h])}else o[h]=r[h]}f(n,a);var v=new g(n,e,a,o);l.push(v)}),1==l.length?l[0]:l},from:function(t,e,i){var r=o(t),a=[];return n(r,function(t,n){var r={},o={};for(var l in i){var h=s(n,l);if(h){var c=d(n,h);o[h]=c,r[h]=u(c,i[l])}else o[l]=i[l]}f(n,r);var m=new g(n,e,r,o);a.push(m)}),1==a.length?a[0]:a},to:function(t,e,i){var r=o(t),a=[];return n(r,function(t,n){var r={},o={};for(var l in i){var f=s(n,l);if(f){var h=d(n,f);r[f]=h,o[f]=u(h,i[l])}else o[l]=i[l]}var c=new g(n,e,r,o);a.push(c)}),1==a.length?a[0]:a},kill:function(t,e){var i=o(t);n(i,function(t,n){n._ct_id&&H[n._ct_id].destroy(e)})},killAll:function(t){for(var e in H)H[e].destroy(t)}}),e(t,{Linear:{None:"(0, 0, 1, 1)"},Quad:{In:"(0.3, 0, 0.65, 0.75)",Out:"(0.35, 0.25, 0.7, 1)",InOut:"(0.46, 0.03, 0.54, 0.97)"},Quart:{In:"(0.5, 0, 0.75, 0)",Out:"(0.25, 1, 0.5, 1)",InOut:"(0.75, 0, 0.25, 1)"},Back:{In:"(0, 0.35, 0.7, -0.6)",Out:"(0.3, 1.6, 0.65, 1)"}}),t});
