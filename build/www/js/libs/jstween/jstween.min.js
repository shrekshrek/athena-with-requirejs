/*!
 * VERSION: 0.9.0
 * DATE: 2017-9-3
 * GIT: https://github.com/shrekshrek/jstween
 * @author: Shrek.wang
 **/

!function(t){"function"==typeof define&&define.amd?define(["exports"],function(e){window.JT=t(e)}):"undefined"!=typeof exports?t(exports):window.JT=t({})}(function(t){function e(t,e){if(t.length&&t.length>0)for(var n=0;n<t.length;n++)e.call(t[n],n,t[n]);else e.call(t,0,t)}function n(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function r(t){return Math.round(1e3*t)/1e3}function a(t){return t?x+i(t):x}function s(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function o(t,e){return"rotation"==e||"scale"==e?e:void 0!==t._jt_obj[e]?e:void 0!==t.style[e]?e:(e=a(e),void 0!==t.style[e]?e:void 0)}function u(t,e,n,i){var r={};if(e instanceof Array){r.num=[];for(var a in e){var s=h(t,e[a]);r.num[a]=s.num,r.unit=s.unit}void 0!=n&&(i?r.num.push(n.num):r.num.unshift(n.num))}else r=h(t,e);return r}function h(t,e){var n=f(e);"rem"==t.unit&&"rem"!=n.unit?(T(),t.num=r(t.num*X),t.unit="px"):"rem"!=t.unit&&"rem"==n.unit&&(T(),t.num=r(t.num/X),t.unit="rem");var i;switch(n.ext){case"+=":i=t.num+n.num;break;case"-=":i=t.num-n.num;break;default:i=n.num}return{num:i,unit:n.unit||t.unit}}function c(t){void 0==t._jt_obj&&(t._jt_obj={perspective:0,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0})}function f(t){var e=/(\+=|-=|)(-|)(\d+\.\d+|\d+)(e[+-]?[0-9]{0,2}|)(rem|px|%|)/i,n=e.exec(t);return n?{num:r(n[2]+n[3]+n[4]),unit:n[5],ext:n[1]}:{num:0,unit:"px",ext:""}}function l(t){return/(,| |jpeg|jpg|png|gif|-3d)/g.test(t)||!/\d/g.test(t)}function p(t,e){switch(e){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[e];case"rotation":return t._jt_obj.rotationZ;case"scale":return t._jt_obj.scaleX;default:return m(t,e)}}function m(t,e){if(t.style[e])return t.style[e];if(document.defaultView&&document.defaultView.getComputedStyle){var i=n(e),r=document.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(i)}return t.currentStyle?t.currentStyle[e]:null}function d(t,e,n){switch(e){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[e]=n,!0;case"rotation":return t._jt_obj.rotationZ=n,!0;case"scale":return t._jt_obj.scaleX=n,t._jt_obj.scaleY=n,!0;default:return v(t,e,n),!1}}function v(t,e,n){t.style[e]=n}function _(t){return"object"==typeof t&&1===t.nodeType}function y(t){var e="";t._jt_obj.perspective&&(e+="perspective("+t._jt_obj.perspective+") "),(t._jt_obj.x||t._jt_obj.y||t._jt_obj.z)&&(e+="translate3d("+j(t._jt_obj.x)+","+j(t._jt_obj.y)+","+j(t._jt_obj.z)+") "),t._jt_obj.rotationX&&(e+="rotateX("+t._jt_obj.rotationX%360+"deg) "),t._jt_obj.rotationY&&(e+="rotateY("+t._jt_obj.rotationY%360+"deg) "),t._jt_obj.rotationZ&&(e+="rotateZ("+t._jt_obj.rotationZ%360+"deg) "),(1!=t._jt_obj.scaleX||1!=t._jt_obj.scaleY||1!=t._jt_obj.scaleZ)&&(e+="scale3d("+t._jt_obj.scaleX+", "+t._jt_obj.scaleY+", "+t._jt_obj.scaleZ+") "),(t._jt_obj.skewX||t._jt_obj.skewY)&&(e+="skew("+t._jt_obj.skewX+"deg,"+t._jt_obj.skewY+"deg) "),t.style[a("transform")]=e}function j(t){return t+("number"==typeof t?"px":"")}function T(){A||(A=document.createElement("div"),A.style.cssText="border:0 solid; position:absolute; line-height:0px;"),Y||(Y=document.getElementsByTagName("body")[0]),Y.appendChild(A),A.style.borderLeftWidth="1rem",X=parseFloat(A.offsetWidth),Y.removeChild(A)}function g(){var e=V.length;if(0===e)return void(z=!1);var n=t.now(),i=n-U;U=n,Z=V.slice(0);for(var r=0;e>r;r++){var a=Z[r];a&&a.isPlaying&&!a._update(i)&&a.pause()}D(g)}function b(){this.initialize.apply(this,arguments)}function w(t,n,i,r,a){switch(t){case"from":P(r);break;default:P(a)}var h=s(n),l=[];return e(h,function(e,n){var s,h={},m={},d=_(n);switch(t){case"fromTo":s=a;break;case"from":s=r;break;case"to":s=a}if(d){c(n);for(var v in s){var y=o(n,v);if(y){var j=f(p(n,y));switch(t){case"fromTo":h[y]=u(j,r[v]),m[y]=u(j,a[v],h[y],!1);break;case"from":h[y]=u(j,r[v],j,!0),m[y]=j;break;case"to":h[y]=j,m[y]=u(j,a[v],j,!1)}}else m[v]=s[v]}}else for(var v in s)if("string"==typeof n[v]||"number"==typeof n[v]){var j=f(n[v]);switch(t){case"fromTo":h[v]=u(j,r[v]),m[v]=u(j,a[v],h[v],!1);break;case"from":h[v]=u(j,r[v],j,!0),m[v]=j;break;case"to":h[v]=j,m[v]=u(j,a[v],j,!1)}}else m[v]=s[v];l.push(new b(n,i,h,m,d))}),1==l.length?l[0]:l}function M(t,n,i){var r=s(t),a=V.length;e(r,function(t,e){for(var r=a-1;r>=0;r--){var s=V[r];s.target===e&&s[n](i)}})}function S(t,e){for(var n=V.length,i=n-1;i>=0;i--){var r=V[i];r[t](e)}}function P(t){t.bezier&&(k(t,t.bezier),t.interpolation=E,delete t.bezier),t.through&&(k(t,t.through),t.interpolation=O,delete t.through),t.linear&&(k(t,t.linear),t.interpolation=I,delete t.linear)}function k(t,e){for(var n in e)for(var i in e[n])0==n?t[i]=[e[n][i]]:t[i].push(e[n][i])}function I(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=q.Linear;return 0>e?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[r],t[r+1>n?n:r+1],i-r)}function E(t,e){var n,i=0,r=t.length-1,a=Math.pow,s=q.Bernstein;for(n=0;r>=n;n++)i+=a(1-e,r-n)*a(e,n)*t[n]*s(r,n);return i}function O(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),a=q.Through;return t[0]===t[n]?(0>e&&(r=Math.floor(i=n*(1+e))),a(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):0>e?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[r?r-1:0],t[r],t[r+1>n?n:r+1],t[r+2>n?n:r+2],i-r)}Date.now=Date.now||function(){return(new Date).getTime()};var R=Date.now();t.now=function(){return Date.now()-R};var x="";!function(){var t=document.createElement("div"),e=["Webkit","Moz","Ms","O"];for(var n in e)if(e[n]+"Transform"in t.style){x=e[n];break}}();var Y,A,X,D=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},V=[],Z=[],z=!1,U=0;Object.assign(b.prototype,{initialize:function(e,n,i,r,a){this.fromVars=i,this.curVars={},this.toVars=r,this.target=e,this.duration=1e3*Math.max(n,0),this.ease=r.ease||t.Linear.None,this.delay=1e3*Math.max(r.delay||0,0),this.yoyo=r.yoyo||!1,this.repeat=r.repeat?r.repeat<0?-100:r.repeat:0,this.repeatDelay=1e3*Math.max(r.repeatDelay||0,0),this.onStart=r.onStart||null,this.onStartScope=r.onStartScope||this,this.onStartParams=r.onStartParams||[],this.onRepeat=r.onRepeat||null,this.onRepeatScope=r.onRepeatScope||this,this.onRepeatParams=r.onRepeatParams||[],this.onEnd=r.onEnd||null,this.onEndScope=r.onEndScope||this,this.onEndParams=r.onEndParams||[],this.onUpdate=r.onUpdate||null,this.onUpdateScope=r.onUpdateScope||this,this.onUpdateParams=r.onUpdateParams||[],this.isPlaying=!1,this.interpolation=r.interpolation||null,this.isReverse=r.isReverse||!1,this.timeScale=r.timeScale||1,this.isKeep=!1,this.isYoReverse=!1,this.isDom=a,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay*this.repeat+this.duration*(this.repeat+1),this.curTime=this.prevTime=0,(void 0==r.isPlaying?!0:r.isPlaying)&&this.play()},_update:function(t){if(this.isKeep=!1,t=this.isReverse?-t*this.timeScale:t*this.timeScale,this.prevTime=this.curTime,this.curTime=this.prevTime+t,this.isReverse&&this.prevTime>=0&&this.curTime<0)return this.curTime=0,this._updateProp(this.curTime),this.onStart&&this.prevTime>=this.startTime&&this.onStart.apply(this.onStartScope,this.onStartParams),this.isKeep;if(!this.isReverse&&this.prevTime<this.endTime&&this.curTime>=this.endTime)return this.curTime=this.endTime,this._updateProp(this.curTime),this.onEnd&&this.onEnd.apply(this.onEndScope,this.onEndParams),this.isKeep;var e=Math.min(this.repeat,Math.max(0,Math.floor((this.prevTime-this.startTime)/(this.duration+this.repeatDelay)))),n=Math.min(this.repeat,Math.max(0,Math.floor((this.curTime-this.startTime)/(this.duration+this.repeatDelay))));return e!=n&&(this.yoyo&&(this.isYoReverse=!this.isYoReverse),this.onRepeat&&this.onRepeat.apply(this.onRepeatScope,this.onRepeatParams)),this._updateProp(this.curTime),this.onEnd&&this.isReverse&&this.prevTime==this.endTime&&this.curTime<this.endTime&&this.onEnd.apply(this.onEndScope,this.onEndParams),this.onStart&&(this.isReverse?this.prevTime>=this.startTime&&this.curTime<this.startTime:0==this.startTime&&0==this.prevTime&&this.curTime>=this.startTime||this.prevTime<this.startTime&&this.curTime>=this.startTime)&&this.onStart.apply(this.onStartScope,this.onStartParams),!0},_updateProp:function(t){t=t==this.endTime?this.duration:(t-this.startTime)%(this.duration+this.repeatDelay);var e=Math.max(0,Math.min(1,0==this.duration?1:t/this.duration));this.isYoReverse&&(e=1-e);var n=this.ease(e),i=!1;for(var a in this.fromVars){var s,o=this.fromVars[a],u=this.toVars[a];s=u.num instanceof Array?this.interpolation(u.num,n):o.num+(u.num-o.num)*n,s=r(s),this.curVars[a]={num:s,unit:u.unit},this.isDom?d(this.target,a,s+(u.unit||0))&&(i=!0):this.target[a]=s+(u.unit||0)}i&&y(this.target),this.onUpdate&&this.onUpdate.apply(this.onUpdateScope,this.onUpdateParams)},_toEnd:function(){var t=!1;for(var e in this.fromVars){var n=this.toVars[e],i=r(n.num);this.curVars[e]={num:i,unit:n.unit},this.isDom?d(this.target,e,i+(n.unit||0))&&(t=!0):this.target[e]=i+(n.unit||0)}t&&y(this.target)},_addSelf:function(){V.push(this),z||(U=t.now(),z=!0,D(g))},_removeSelf:function(){var t=V.indexOf(this);-1!==t&&V.splice(t,1)},play:function(t){this.isKeep=!0,this.isReverse=!1,void 0!==t&&this.seek(t),this.isPlaying||(this.isPlaying=!0,this._addSelf())},pause:function(){this.isKeep=!1,this.isPlaying&&(this.isPlaying=!1,this._removeSelf())},stop:function(){this.pause(),this.curTime=this.prevTime=0},reverse:function(t){this.isKeep=!0,this.isReverse=!0,void 0!==t&&this.seek(t),this.isPlaying||(this.isPlaying=!0,this._addSelf())},seek:function(t){var e=Math.max(0,Math.min(this.endTime,1e3*t));this.curTime!=e&&(this.curTime=e,this._updateProp(this.curTime))},setTimeScale:function(t){this.timeScale=t},kill:function(t){this.pause(),t&&(this._toEnd(),this.onEnd&&this.onEnd.apply(this.onEndScope,this.onEndParams)),this.curTime=this.prevTime=this.endTime=0,this.target=this.onStart=this.onRepeat=this.onEnd=this.onUpdate=null}}),Object.assign(t,{get:function(t,e){var n=s(t);if(void 0!==n.length&&(n=n[0]),_(n)){c(n);var i=o(n,e);return i?p(n,i):null}return n[e]},set:function(t,n){var i=s(t);e(i,function(t,e){if(_(e)){c(e);var i=!1;for(var r in n){var a=o(e,r);if(a)if(l(n[r]))d(e,a,n[r]);else{var s=u(f(p(e,a)),n[r]);d(e,a,s.num+(s.unit||0))&&(i=!0)}}i&&y(e)}else for(var h in n){var s=u(f(e[h]),n[h]);e[h]=s.num+(s.unit||0)}})},fromTo:function(t,e,n,i){return w("fromTo",t,e,n,i)},from:function(t,e,n){return w("from",t,e,n,{})},to:function(t,e,n){return w("to",t,e,{},n)},kill:function(t,n){var i=s(t);e(i,function(t,e){for(var i=V.length,r=i-1;r>=0;r--){var a=V[r];a.target===e&&a.kill(n)}})},killAll:function(t){for(var e=V.length,n=e-1;n>=0;n--){var i=V[n];i.kill(t)}},play:function(t,e){M(t,"play",e)},playAll:function(t){S("play",t)},pause:function(t){M(t,"pause")},pauseAll:function(){S("pause")},stop:function(t){M(t,"stop")},stopAll:function(){S("stop")},reverse:function(t,e){M(t,"reverse",e)},reverseAll:function(t){S("reverse",t)},seek:function(t,e){M(t,"seek",e)},seekAll:function(t){S("seek",t)},setTimeScale:function(t,e){M(t,"setTimeScale",e)},setTimeScaleAll:function(t){S("setTimeScale",t)},isTweening:function(t){var e=s(t);e=e[0]||e;for(var n=V.length,i=n-1;i>=0;i--){var r=V[i];if(r.target===e)return!0}return!1},call:function(t,e,n,i){return new b(e,t,{},{onEnd:e,onEndParams:n,isPlaying:i},!1)}}),Object.assign(t,{path:function(e){P(e);for(var n,i=e.ease||t.Linear.None,r=e.step||1,a=[],s=0;r>=s;s++){n=i(s/r);var o={};for(var u in e)e[u]instanceof Array&&(o[u]=e.interpolation(e[u],n));a.push(o)}return a}});var q={Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=q.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n,i=1;if(t[e])return t[e];for(n=e;n>1;n--)i*=n;return t[e]=i}}(),Through:function(t,e,n,i,r){var a=.5*(n-t),s=.5*(i-e),o=r*r,u=r*o;return(2*e-2*n+a+s)*u+(-3*e+3*n-2*a-s)*o+a*r+e}};return Object.assign(t,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},Out:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},InOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(e){return 1-t.Bounce.Out(1-e)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(e){return.5>e?.5*t.Bounce.In(2*e):.5*t.Bounce.Out(2*e-1)+.5}}}),t});
