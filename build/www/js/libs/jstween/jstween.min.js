/*!
 * VERSION: 0.5.2
 * DATE: 2016-6-7
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/

!function(t){var n="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"function"==typeof define&&define.amd?define(["exports"],function(e){n.JT=t(n,e)}):"undefined"!=typeof exports?t(n,exports):n.JT=t(n,{})}(function(t,n){function e(t,n){for(var e in n)t[e]=n[e]}function r(t,n){if("function"==typeof t)n.call(t,0,t);else if(void 0===t.length)n.call(t,0,t);else for(var e=0;e<t.length;e++)n.call(t[e],e,t[e])}function a(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function i(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function o(t){return Math.round(100*t)/100}function u(t){return t?Y+i(t):Y}function s(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function l(t,n){return"rotation"==n||"scale"==n?n:void 0!==t._jt_obj[n]?n:void 0!==t.style[n]?n:(n=u(n),void 0!==t.style[n]?n:void 0)}function c(t,n,e,r){var a={};if(n instanceof Array){a.num=[];for(var i in n){var o=f(t,n[i]);a.num[i]=o.num,a.unit=o.unit}void 0!=e&&(r?a.num.push(e.num):a.num.unshift(e.num))}else a=f(t,n);return a}function f(t,n){var e=p(n);"rem"==t.unit&&"rem"!=e.unit?(b(),t.num=o(t.num*C),t.unit="px"):"rem"!=t.unit&&"rem"==e.unit&&(b(),t.num=o(t.num/C),t.unit="rem");var r;switch(e.ext){case"+=":r=t.num+e.num;break;case"-=":r=t.num-e.num;break;default:r=e.num}return{num:r,unit:e.unit||t.unit}}function h(t){void 0==t._jt_obj&&(t._jt_obj={x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0})}function p(t){var n=/(\+=|-=|)(-|)(\d+\.\d+|\d+)(rem|px|)/i,e=n.exec(t);return e?{num:parseFloat(e[2]+e[3]),unit:e[4],ext:e[1]}:{num:0,unit:"px",ext:""}}function d(t){var n=/\S\s+\S/g;return n.test(t)}function m(t,n){switch(n){case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n];case"rotation":return t._jt_obj.rotationZ;case"scale":return t._jt_obj.scaleX;default:return v(t,n)}}function v(t,n){if(t.style[n])return t.style[n];if(document.defaultView&&document.defaultView.getComputedStyle){var e=a(n),r=document.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(e)}return t.currentStyle?t.currentStyle[n]:null}function y(t,n,e){switch(n){case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n]=e,!0;case"rotation":return t._jt_obj.rotationZ=e,!0;case"scale":return t._jt_obj.scaleX=e,t._jt_obj.scaleY=e,!0;default:return _(t,n,e),!1}}function _(t,n,e){t.style[n]=e}function g(t){return"object"==typeof t&&1===t.nodeType}function j(t){var n="";(t._jt_obj.x||t._jt_obj.y||t._jt_obj.z)&&(n+="translate3d("+t._jt_obj.x+"px,"+t._jt_obj.y+"px,"+t._jt_obj.z+"px) "),t._jt_obj.rotationX&&(n+="rotateX("+t._jt_obj.rotationX%360+"deg) "),t._jt_obj.rotationY&&(n+="rotateY("+t._jt_obj.rotationY%360+"deg) "),t._jt_obj.rotationZ&&(n+="rotateZ("+t._jt_obj.rotationZ%360+"deg) "),(1!=t._jt_obj.scaleX||1!=t._jt_obj.scaleY||1!=t._jt_obj.scaleZ)&&(n+="scale3d("+t._jt_obj.scaleX+", "+t._jt_obj.scaleY+", "+t._jt_obj.scaleZ+") "),(t._jt_obj.skewX||t._jt_obj.skewY)&&(n+="skew("+t._jt_obj.skewX+"deg,"+t._jt_obj.skewY+"deg) "),t.style[u("transform")]=n}function b(){z||(z=document.createElement("div"),z.style.cssText="border:0 solid; position:absolute; line-height:0px;"),D||(D=document.getElementsByTagName("body")[0]),D.appendChild(z),z.style.borderLeftWidth="1rem",C=parseFloat(z.offsetWidth),D.removeChild(z)}function w(){V=!0;var t,n,e=q.length,r=F.length;if(0===e&&0===r)return void(V=!1);var a=U(),i=a-B;for(B=a,t=e-1;t>=0;t--)if(q[t]&&!q[t]._update(i)){var o=q.splice(t,1)[0];o.onUpdate&&o.onUpdate.apply(o,o.onUpdateParams),o.onEnd&&o.onEnd.apply(o,o.onEndParams),o.target=null}for(n=r-1;n>=0;n--)if(F[n]&&!F[n]._update(i)){var u=F.splice(n,1)[0];u.onEnd&&u.onEnd.apply(u,u.onEndParams)}Z(w)}function P(){this.initialize.apply(this,arguments)}function M(t,n){var e=s(t),a=q.length;r(e,function(t,e){for(var r=a-1;r>=0;r--){var i=q[r];i.target===e&&i[n]()}})}function E(t){for(var n=q.length,e=n-1;e>=0;e--){var r=q[e];r[t]()}}function T(){this.initialize.apply(this,arguments)}function I(t,n){var e=t,a=F.length;r(e,function(t,e){for(var r=a-1;r>=0;r--){var i=F[r];i.onEnd===e&&i[n]()}})}function x(t){for(var n=F.length,e=n-1;e>=0;e--){var r=F[e];r[t]()}}function O(t){t.bezier&&(k(t,t.bezier),t.interpolation=S,delete t.bezier),t.through&&(k(t,t.through),t.interpolation=A,delete t.through),t.linear&&(k(t,t.linear),t.interpolation=R,delete t.linear)}function k(t,n){for(var e in n)for(var r in n[e])0==e?t[r]=[n[e][r]]:t[r].push(n[e][r])}function R(t,n){var e=t.length-1,r=e*n,a=Math.floor(r),i=L.Linear;return 0>n?i(t[0],t[1],r):n>1?i(t[e],t[e-1],e-r):i(t[a],t[a+1>e?e:a+1],r-a)}function S(t,n){var e,r=0,a=t.length-1,i=Math.pow,o=L.Bernstein;for(e=0;a>=e;e++)r+=i(1-n,a-e)*i(n,e)*t[e]*o(a,e);return r}function A(t,n){var e=t.length-1,r=e*n,a=Math.floor(r),i=L.Through;return t[0]===t[e]?(0>n&&(a=Math.floor(r=e*(1+n))),i(t[(a-1+e)%e],t[a],t[(a+1)%e],t[(a+2)%e],r-a)):0>n?t[0]-(i(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(i(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):i(t[a?a-1:0],t[a],t[a+1>e?e:a+1],t[a+2>e?e:a+2],r-a)}Date.now=Date.now||function(){return(new Date).getTime()};var X=Date.now(),U=function(){return Date.now()-X},Y="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var e in n)if(n[e]+"Transform"in t.style){Y=n[e];break}}();var D,z,C,Z=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},q=[],V=!1,B=0;e(P.prototype,{initialize:function(t,e,r,a,i){this.fromVars=r,this.curVars={},this.toVars=a,this.target=t,this.duration=1e3*Math.max(e,0),this.ease=a.ease||n.Linear.None,this.delay=1e3*Math.max(a.delay||0,0),this.yoyo=a.yoyo||!1,this.repeat=this.curRepeat=Math.floor(a.repeat||0),this.repeatDelay=1e3*Math.max(a.repeatDelay||0,0),this.onStart=a.onStart||null,this.onStartParams=a.onStartParams||[],this.onRepeat=a.onRepeat||null,this.onRepeatParams=a.onRepeatParams||[],this.onEnd=a.onEnd||null,this.onEndParams=a.onEndParams||[],this.onUpdate=a.onUpdate||null,this.onUpdateParams=a.onUpdateParams||[],this.isPlaying=a.isPlaying||!0,this.interpolation=a.interpolation||null,this.isReverse=!1,this.isDom=i,this.curTime=0,this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay+this.duration,0!=this.delay&&(this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams)),q.push(this),V||(B=U(),w())},_update:function(t){if(!this.isPlaying)return!0;var n=t;if(this.curTime+=n,this.curTime<this.startTime)return!0;if(this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this,this.onStartParams)),this.curTime<this.startTime+this.repeatDelay)return!0;if(this.curTime<this.endTime)this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams);else{if(0==this.curRepeat)return this._updateProp(),!1;this.yoyo&&(this.isReverse=!this.isReverse),0==this.repeatDelay?(this.curTime=this.curTime-this.duration-this.repeatDelay,this._updateProp()):(this._updateProp(),this.curTime=this.curTime-this.duration-this.repeatDelay),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this.onRepeat&&this.onRepeat.apply(this,this.onRepeatParams),this.curRepeat>0&&this.curRepeat--}return!0},_updateProp:function(){var t=0==this.duration?1:(this.curTime-this.startTime-this.repeatDelay)/this.duration;t=Math.max(0,Math.min(1,t)),this.isReverse&&(t=1-t);var n=this.ease(t),e=!1;for(var r in this.fromVars){var a,i=this.fromVars[r],u=this.toVars[r];a=u.num instanceof Array?this.interpolation(u.num,n):i.num+(u.num-i.num)*n,a=o(a),this.curVars[r]={num:a,unit:u.unit},this.isDom?(Math.abs(u.num-i.num)>20&&(a=Math.round(a)),y(this.target,r,a+u.unit)&&(e=!0)):this.target[r]=a+(u.unit||0)}e&&j(this.target)},play:function(){this.target&&(this.isPlaying=!0)},pause:function(){this.target&&(this.isPlaying=!1)},destroy:function(t){if(this.target){var n=q.indexOf(this);if(-1!==n){var e=q.splice(n,1)[0];t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams),this.target=null}}}}),e(n,{get:function(t,n){var e=s(t);if(void 0!==e.length&&(e=e[0]),g(e)){h(e);var r=l(e,n);return r?m(e,r):null}return e[n]},set:function(t,n){var e=s(t);r(e,function(t,e){if(g(e)){h(e);var r=!1;for(var a in n){var i=l(e,a);if(i)if(d(n[a]))y(e,i,n[a]);else{var o=c(p(m(e,i)),n[a]);y(e,i,o.num+o.unit)&&(r=!0)}}r&&j(this.target)}else for(var u in n){var o=c(p(e[u]),n[u]);e[u]=o.num+(o.unit||0)}})},fromTo:function(t,n,e,a){O(a);var i=s(t),o=[];return r(i,function(t,r){var i={},u={},s=g(r);if(s){h(r);for(var f in a){var d=l(r,f);if(d){var v=p(m(r,d));i[d]=c(v,e[f]),u[d]=c(v,a[f],i[d],!1)}else u[f]=a[f]}}else for(var f in a)if(void 0!==r[f]){var v=p(r[f]);i[f]=c(v,e[f]),u[f]=c(v,a[f],i[f],!1)}else u[f]=a[f];var y=new P(r,n,i,u,s);o.push(y)}),1==o.length?o[0]:o},from:function(t,n,e){O(e);var a=s(t),i=[];return r(a,function(t,r){var a={},o={},u=g(r);if(u){h(r);for(var s in e){var f=l(r,s);if(f){var d=p(m(r,f));a[f]=c(d,e[s],d,!0),o[f]=d}else o[s]=e[s]}}else for(var s in e)if(void 0!==r[s]){var d=p(r[s]);a[s]=c(d,e[s],d,!0),o[s]=d}else o[s]=e[s];var v=new P(r,n,a,o,u);i.push(v)}),1==i.length?i[0]:i},to:function(t,n,e){O(e);var a=s(t),i=[];return r(a,function(t,r){var a={},o={},u=g(r);if(u){h(r);for(var s in e){var f=l(r,s);if(f){var d=p(m(r,f));a[f]=d,o[f]=c(d,e[s],d,!1)}else o[s]=e[s]}}else for(var s in e)if(void 0!==r[s]){var d=p(r[s]);a[s]=d,o[s]=c(d,e[s],d,!1)}else o[s]=e[s];var v=new P(r,n,a,o,u);i.push(v)}),1==i.length?i[0]:i},kill:function(t,n){var e=s(t);r(e,function(t,e){for(var r=q.length,a=r-1;a>=0;a--){var i=q[a];i.target===e&&(q.splice(a,1),n&&i.onEnd&&i.onEnd.apply(i,i.onEndParams),i.target=null)}})},killAll:function(t){if(!t)return void(q=[]);for(var n=q.length,e=n-1;e>=0;e--){var r=q.splice(e,1);t&&r.onEnd&&r.onEnd.apply(r,r.onEndParams),r.target=null}},play:function(t){M(t,"play")},playAll:function(){E("play")},pause:function(t){M(t,"pause")},pauseAll:function(){E("pause")}});var F=[];e(T.prototype,{initialize:function(t,n,e,r){this.delay=1e3*t,this.onEnd=n||null,this.onEndParams=e||[],this.curTime=0,this.endTime=this.delay,this.isPlaying=r||!0,F.push(this),V||(B=U(),w())},_update:function(t){if(!this.isPlaying)return!0;var n=t;return this.curTime+=n,this.curTime<this.endTime?!0:!1},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},destroy:function(t){var n=F.indexOf(this);if(-1!==n){var e=F.splice(n,1)[0];t&&e.onEnd&&e.onEnd.apply(e,e.onEndParams)}}}),e(n,{call:function(t,n,e){return new T(t,n,e)},killCall:function(t,n){var e=t,a=F.length;r(e,function(t,e){for(var r=a-1;r>=0;r--){var i=F[r];i.onEnd===e&&(F.splice(r,1),n&&i.onEnd&&i.onEnd.apply(i,i.onEndParams))}})},killAllCalls:function(t){if(!t)return void(F=[]);for(var n=F.length,e=n-1;e>=0;e--){var r=F.splice(e,1);t&&r.onEnd&&r.onEnd.apply(r,r.onEndParams)}},playCall:function(t){I(t,"play")},playAllCalls:function(){x("play")},pauseCall:function(t){I(t,"pause")},pauseAllCalls:function(){x("pause")}}),e(n,{path:function(t){O(t);for(var e,r=t.ease||n.Linear.None,a=t.step||1,i=[],o=0;a>=o;o++){e=r(o/a);var u={};for(var s in t)t[s]instanceof Array&&(u[s]=t.interpolation(t[s],e));i.push(u)}return i}});var L={Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=L.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e,r=1;if(t[n])return t[n];for(e=n;e>1;e--)r*=e;return t[n]=r}}(),Through:function(t,n,e,r,a){var i=.5*(e-t),o=.5*(r-n),u=a*a,s=a*u;return(2*n-2*e+i+o)*s+(-3*n+3*e-2*i-o)*u+i*a+n}};return e(n,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r)))},Out:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/r)+1)},InOut:function(t){var n,e=.1,r=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=r/4):n=r*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/r)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-n.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Bounce.In(2*t):.5*n.Bounce.Out(2*t-1)+.5}}}),n.now=U,n});
