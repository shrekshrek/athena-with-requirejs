/*!
 * VERSION: 0.7.0
 * DATE: 2016-8-17
 * GIT: https://github.com/shrekshrek/jstween
 * @author: Shrek.wang
 **/

!function(t){"function"==typeof define&&define.amd?define(["exports"],function(n){window.JT=t(n)}):"undefined"!=typeof exports?t(exports):window.JT=t({})}(function(t){function n(t,n){for(var e in n)t[e]=n[e]}function e(t,n){if(t.length&&t.length>0)for(var e=0;e<t.length;e++)n.call(t[e],e,t[e]);else n.call(t,0,t)}function i(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(t){return t.replace(/\b(\w)|\s(\w)/g,function(t){return t.toUpperCase()})}function a(t){return Math.round(1e3*t)/1e3}function o(t){return t?Y+r(t):Y}function s(t){if(!t)throw"target is undefined, can't tween!!!";return"string"==typeof t?"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t):t}function u(t,n){return"rotation"==n||"scale"==n?n:void 0!==t._jt_obj[n]?n:void 0!==t.style[n]?n:(n=o(n),void 0!==t.style[n]?n:void 0)}function c(t,n,e,i){var r={};if(n instanceof Array){r.num=[];for(var a in n){var o=h(t,n[a]);r.num[a]=o.num,r.unit=o.unit}void 0!=e&&(i?r.num.push(e.num):r.num.unshift(e.num))}else r=h(t,n);return r}function h(t,n){var e=f(n);"rem"==t.unit&&"rem"!=e.unit?(w(),t.num=a(t.num*C),t.unit="px"):"rem"!=t.unit&&"rem"==e.unit&&(w(),t.num=a(t.num/C),t.unit="rem");var i;switch(e.ext){case"+=":i=t.num+e.num;break;case"-=":i=t.num-e.num;break;default:i=e.num}return{num:i,unit:e.unit||t.unit}}function l(t){void 0==t._jt_obj&&(t._jt_obj={perspective:0,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0})}function f(t){var n=/(\+=|-=|)(-|)(\d+\.\d+|\d+)(e[+-]?[0-9]{0,2}|)(rem|px|%|)/i,e=n.exec(t);return e?{num:a(e[2]+e[3]+e[4]),unit:e[5],ext:e[1]}:{num:0,unit:"px",ext:""}}function p(t){return/\S\s+\S/g.test(t)||!/\d/g.test(t)}function d(t,n){switch(n){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n];case"rotation":return t._jt_obj.rotationZ;case"scale":return t._jt_obj.scaleX;default:return v(t,n)}}function v(t,n){if(t.style[n])return t.style[n];if(document.defaultView&&document.defaultView.getComputedStyle){var e=i(n),r=document.defaultView.getComputedStyle(t,"");return r&&r.getPropertyValue(e)}return t.currentStyle?t.currentStyle[n]:null}function m(t,n,e){switch(n){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return t._jt_obj[n]=e,!0;case"rotation":return t._jt_obj.rotationZ=e,!0;case"scale":return t._jt_obj.scaleX=e,t._jt_obj.scaleY=e,!0;default:return _(t,n,e),!1}}function _(t,n,e){t.style[n]=e}function y(t){return"object"==typeof t&&1===t.nodeType}function j(t){var n="";t._jt_obj.perspective&&(n+="perspective("+t._jt_obj.perspective+") "),(t._jt_obj.x||t._jt_obj.y||t._jt_obj.z)&&(n+="translate3d("+g(t._jt_obj.x)+","+g(t._jt_obj.y)+","+g(t._jt_obj.z)+") "),t._jt_obj.rotationX&&(n+="rotateX("+t._jt_obj.rotationX%360+"deg) "),t._jt_obj.rotationY&&(n+="rotateY("+t._jt_obj.rotationY%360+"deg) "),t._jt_obj.rotationZ&&(n+="rotateZ("+t._jt_obj.rotationZ%360+"deg) "),(1!=t._jt_obj.scaleX||1!=t._jt_obj.scaleY||1!=t._jt_obj.scaleZ)&&(n+="scale3d("+t._jt_obj.scaleX+", "+t._jt_obj.scaleY+", "+t._jt_obj.scaleZ+") "),(t._jt_obj.skewX||t._jt_obj.skewY)&&(n+="skew("+t._jt_obj.skewX+"deg,"+t._jt_obj.skewY+"deg) "),t.style[o("transform")]=n}function g(t){return t+("number"==typeof t?"px":"")}function w(){z||(z=document.createElement("div"),z.style.cssText="border:0 solid; position:absolute; line-height:0px;"),D||(D=document.getElementsByTagName("body")[0]),D.appendChild(z),z.style.borderLeftWidth="1rem",C=parseFloat(z.offsetWidth),D.removeChild(z)}function b(){q=!0;var t=Z.length,n=F.length;if(0===t&&0===n)return void(q=!1);var e=U(),i=e-B;B=e;for(var r=0;t>r;r++){var a=Z[r];a&&!a._update(i)&&(a.isActive&&(a.isActive=!1,Z.splice(r,1),a.onEnd&&a.onEnd.apply(a,a.onEndParams)),r--,t--)}for(var o=0;n>o;o++){var s=F[o];s&&!s._update(i)&&(F.splice(o,1),s.onEnd&&s.onEnd.apply(s,s.onEndParams),o--,n--)}V(b)}function M(){this.initialize.apply(this,arguments)}function P(t,n){var i=s(t),r=Z.length;e(i,function(t,e){for(var i=r-1;i>=0;i--){var a=Z[i];a.target===e&&a[n]()}})}function T(t){for(var n=Z.length,e=n-1;e>=0;e--){var i=Z[e];i[t]()}}function E(){this.initialize.apply(this,arguments)}function I(t,n){var i=t,r=F.length;e(i,function(t,e){for(var i=r-1;i>=0;i--){var a=F[i];a.onEnd===e&&a[n]()}})}function S(t){for(var n=F.length,e=n-1;e>=0;e--){var i=F[e];i[t]()}}function k(t){t.bezier&&(x(t,t.bezier),t.interpolation=O,delete t.bezier),t.through&&(x(t,t.through),t.interpolation=R,delete t.through),t.linear&&(x(t,t.linear),t.interpolation=A,delete t.linear)}function x(t,n){for(var e in n)for(var i in n[e])0==e?t[i]=[n[e][i]]:t[i].push(n[e][i])}function A(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=L.Linear;return 0>n?a(t[0],t[1],i):n>1?a(t[e],t[e-1],e-i):a(t[r],t[r+1>e?e:r+1],i-r)}function O(t,n){var e,i=0,r=t.length-1,a=Math.pow,o=L.Bernstein;for(e=0;r>=e;e++)i+=a(1-n,r-e)*a(n,e)*t[e]*o(r,e);return i}function R(t,n){var e=t.length-1,i=e*n,r=Math.floor(i),a=L.Through;return t[0]===t[e]?(0>n&&(r=Math.floor(i=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],i-r)):0>n?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):n>1?t[e]-(a(t[e],t[e],t[e-1],t[e-1],i-e)-t[e]):a(t[r?r-1:0],t[r],t[r+1>e?e:r+1],t[r+2>e?e:r+2],i-r)}Date.now=Date.now||function(){return(new Date).getTime()};var X=Date.now(),U=function(){return Date.now()-X},Y="";!function(){var t=document.createElement("div"),n=["Webkit","Moz","Ms","O"];for(var e in n)if(n[e]+"Transform"in t.style){Y=n[e];break}}();var D,z,C,V=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},Z=[],q=!1,B=0;n(M.prototype,{initialize:function(n,e,i,r,a){this.fromVars=i,this.curVars={},this.toVars=r,this.target=n,this.duration=1e3*Math.max(e,0),this.ease=r.ease||t.Linear.None,this.delay=1e3*Math.max(r.delay||0,0),this.yoyo=r.yoyo||!1,this.repeat=this.curRepeat=Math.floor(r.repeat||0),this.repeatDelay=1e3*Math.max(r.repeatDelay||0,0),this.onStart=r.onStart||null,this.onStartParams=r.onStartParams||[],this.onRepeat=r.onRepeat||null,this.onRepeatParams=r.onRepeatParams||[],this.onEnd=r.onEnd||null,this.onEndParams=r.onEndParams||[],this.onUpdate=r.onUpdate||null,this.onUpdateParams=r.onUpdateParams||[],this.isPlaying=r.isPlaying||!0,this.interpolation=r.interpolation||null,this.isActive=r.isActive||!0,this.isReverse=!1,this.isDom=a,this.curTime=0,this.isStart=!1,this.startTime=this.delay,this.endTime=this.startTime+this.repeatDelay+this.duration,0!=this.delay&&(this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams)),this.isActive&&this._addSelf()},_update:function(t){if(!this.isPlaying)return!0;if(this.curTime+=t,this.curTime<this.startTime)return!0;if(this.isStart||(this.curTime+=this.repeatDelay),this.curTime<this.startTime+this.repeatDelay)return!0;if(this.curTime<this.endTime)this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams);else{if(0==this.curRepeat)return this._updateProp(),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this._checkStart(),!1;this.yoyo&&(this.isReverse=!this.isReverse);var n=(this.curTime-this.endTime)%(this.duration+this.repeatDelay);0==this.repeatDelay?(this.curTime=this.startTime+n,this._updateProp()):(this._updateProp(),this.curTime=this.startTime+n),this.onUpdate&&this.onUpdate.apply(this,this.onUpdateParams),this.onRepeat&&this.onRepeat.apply(this,this.onRepeatParams),this.curRepeat>0&&this.curRepeat--}return this._checkStart(),!0},_checkStart:function(){this.isStart||(this.isStart=!0,this.onStart&&this.onStart.apply(this,this.onStartParams))},_updateProp:function(){var t=0==this.duration?1:(this.curTime-this.startTime-this.repeatDelay)/this.duration;t=Math.max(0,Math.min(1,t)),this.isReverse&&(t=1-t);var n=this.ease(t),e=!1;for(var i in this.fromVars){var r,o=this.fromVars[i],s=this.toVars[i];r=s.num instanceof Array?this.interpolation(s.num,n):o.num+(s.num-o.num)*n,r=a(r),this.curVars[i]={num:r,unit:s.unit},this.isDom?(Math.abs(s.num-o.num)>20&&(r=Math.round(r)),m(this.target,i,r+(s.unit||0))&&(e=!0)):this.target[i]=r+(s.unit||0)}e&&j(this.target)},_toEnd:function(){var t=!1;for(var n in this.fromVars){var e=this.toVars[n],i=a(e.num);this.curVars[n]={num:i,unit:e.unit},this.isDom?m(this.target,n,i+(e.unit||0))&&(t=!0):this.target[n]=i+(e.unit||0)}t&&j(this.target)},_addSelf:function(){this.isActive=!0,Z.push(this),q||(B=t.now(),b())},_removeSelf:function(){this.isActive=!1;var t=Z.indexOf(this);-1!==t&&Z.splice(t,1)},active:function(){this._addSelf()},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},kill:function(t){this._removeSelf(),t&&(this._toEnd(),this.onEnd&&this.onEnd.apply(this,this.onEndParams))}}),n(t,{get:function(t,n){var e=s(t);if(void 0!==e.length&&(e=e[0]),y(e)){l(e);var i=u(e,n);return i?d(e,i):null}return e[n]},set:function(t,n){var i=s(t);e(i,function(t,e){if(y(e)){l(e);var i=!1;for(var r in n){var a=u(e,r);if(a)if(p(n[r]))m(e,a,n[r]);else{var o=c(f(d(e,a)),n[r]);m(e,a,o.num+(o.unit||0))&&(i=!0)}}i&&j(e)}else for(var s in n){var o=c(f(e[s]),n[s]);e[s]=o.num+(o.unit||0)}})},fromTo:function(t,n,i,r){k(r);var a=s(t),o=[];return e(a,function(t,e){var a={},s={},h=y(e);if(h){l(e);for(var p in r){var v=u(e,p);if(v){var m=f(d(e,v));a[v]=c(m,i[p]),s[v]=c(m,r[p],a[v],!1)}else s[p]=r[p]}}else for(var p in r)if(void 0!==e[p]){var m=f(e[p]);a[p]=c(m,i[p]),s[p]=c(m,r[p],a[p],!1)}else s[p]=r[p];var _=new M(e,n,a,s,h);o.push(_)}),1==o.length?o[0]:o},from:function(t,n,i){k(i);var r=s(t),a=[];return e(r,function(t,e){var r={},o={},s=y(e);if(s){l(e);for(var h in i){var p=u(e,h);if(p){var v=f(d(e,p));r[p]=c(v,i[h],v,!0),o[p]=v}else o[h]=i[h]}}else for(var h in i)if(void 0!==e[h]){var v=f(e[h]);r[h]=c(v,i[h],v,!0),o[h]=v}else o[h]=i[h];var m=new M(e,n,r,o,s);a.push(m)}),1==a.length?a[0]:a},to:function(t,n,i){k(i);var r=s(t),a=[];return e(r,function(t,e){var r={},o={},s=y(e);if(s){l(e);for(var h in i){var p=u(e,h);if(p){var v=f(d(e,p));r[p]=v,o[p]=c(v,i[h],v,!1)}else o[h]=i[h]}}else for(var h in i)if(void 0!==e[h]){var v=f(e[h]);r[h]=v,o[h]=c(v,i[h],v,!1)}else o[h]=i[h];var m=new M(e,n,r,o,s);a.push(m)}),1==a.length?a[0]:a},kill:function(t,n){var i=s(t);e(i,function(t,e){for(var i=Z.length,r=i-1;r>=0;r--){var a=Z[r];a.target===e&&a.kill(n)}})},killAll:function(t){for(var n=Z.length,e=n-1;e>=0;e--){var i=Z[e];i.kill(t)}},play:function(t){P(t,"play")},playAll:function(){T("play")},pause:function(t){P(t,"pause")},pauseAll:function(){T("pause")},isTweening:function(t){var n=s(t);n=n[0]||n;for(var e=Z.length,i=e-1;i>=0;i--){var r=Z[i];if(r.target===n)return!0}return!1}});var F=[];n(E.prototype,{initialize:function(t,n,e,i){this.delay=1e3*t,this.onEnd=n||null,this.onEndParams=e||[],this.curTime=0,this.endTime=this.delay,this.isPlaying=i||!0,0!=this.delay?this._addSelf():this.onEnd&&this.onEnd.apply(this,this.onEndParams)},_update:function(t){return this.isPlaying?(this.curTime+=t,this.curTime<this.endTime?!0:!1):!0},_addSelf:function(){F.push(this),q||(B=t.now(),b())},_removeSelf:function(){var t=F.indexOf(this);-1!==t&&F.splice(t,1)},play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},kill:function(t){this._removeSelf(),t&&(this._toEnd(),this.onEnd&&this.onEnd.apply(this,this.onEndParams))}}),n(t,{call:function(t,n,e,i){return new E(t,n,e,i)},killCall:function(t,n){var i=t,r=F.length;e(i,function(t,e){for(var i=r-1;i>=0;i--){var a=F[i];a.onEnd===e&&a.kill(n)}})},killAllCalls:function(t){for(var n=F.length,e=n-1;e>=0;e--){var i=F[e];i.kill(t)}},playCall:function(t){I(t,"play")},playAllCalls:function(){S("play")},pauseCall:function(t){I(t,"pause")},pauseAllCalls:function(){S("pause")}}),n(t,{path:function(n){k(n);for(var e,i=n.ease||t.Linear.None,r=n.step||1,a=[],o=0;r>=o;o++){e=i(o/r);var s={};for(var u in n)n[u]instanceof Array&&(s[u]=n.interpolation(n[u],e));a.push(s)}return a}});var L={Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=L.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e,i=1;if(t[n])return t[n];for(e=n;e>1;e--)i*=e;return t[n]=i}}(),Through:function(t,n,e,i,r){var a=.5*(e-t),o=.5*(i-n),s=r*r,u=r*s;return(2*n-2*e+a+o)*u+(-3*n+3*e-2*a-o)*s+a*r+n}};return n(t,{Linear:{None:function(t){return t}},Quad:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quart:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quint:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sine:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Expo:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circ:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)))},Out:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin(2*(t-n)*Math.PI/i)+1)},InOut:function(t){var n,e=.1,i=.4;return 0===t?0:1===t?1:(!e||1>e?(e=1,n=i/4):n=i*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i):e*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-n)*Math.PI/i)*.5+1)}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?.5*t*t*((n+1)*t-n):.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(n){return 1-t.Bounce.Out(1-n)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(n){return.5>n?.5*t.Bounce.In(2*n):.5*t.Bounce.Out(2*n-1)+.5}}}),t.now=U,t});
